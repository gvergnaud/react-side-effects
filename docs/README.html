<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>React Side Effects</title>
    <link rel="stylesheet" href="./css/reveal.css" />
    <link rel="stylesheet" href="./css/theme/solarized.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/atom-one-dark.css" />
    <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">

### React
## Side Effects

<p style="font-size:.7em">Slides: https://gvergnaud.github.io/react-side-effects</p>

</script></section><section  data-markdown><script type="text/template">
## üëã

**Gabriel Vergnaud**

H√©ticien de la P2017

<div class="flex">
  <span>Frontend engineer&nbsp;</span><img src="resources/logo-sketchfab.png" class="simple-image" style="width:200px" />
</div>

<div class="flex">
[@gvergnaud](https://github.com/gvergnaud)<span>&nbsp;on&nbsp;</span><img
  src="resources/logo-github.png"
  class="simple-image"
  style="width:50px;" />
</div>

<div class="flex">
[@GabrielVergnaud](https://twitter.com/GabrielVergnaud)<span>&nbsp;on&nbsp;</span><img
  src="resources/logo-twitter.png"
  class="simple-image"
  style="width:50px;" />
</div>

<aside class="notes"><ul>
<li>Qui suis je ?<ul>
<li>gabriel vergnaud</li>
<li>Heticien P2017</li>
<li>developer √† Sketchfab.com (On recrute!)</li>
<li>gvergnaud on github</li>
<li>GabrielVergnaud on twitter</li>
</ul>
</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">## üó∫
#### I. qu'est ce que les side effects
#### II. les effects en React
#### III. g√©rer les erreurs
#### IV. les side effects et le state reducer pattern
</script></section><section  data-markdown><script type="text/template">
# I
### les side effects ?
<small>mais qu'est-ce donc</small>
</script></section><section  data-markdown><script type="text/template">
Le code qui int√©ragit avec le **monde ext√©rieur**
</script></section><section  data-markdown><script type="text/template">
<small>Mais ext√©rieur √† quoi ?</small>
<br/>
<p class="fragment">Au **scope** de la fonction</p>
</script></section><section  data-markdown><script type="text/template">
```js
let imInTheUpperScope = true

function sideEffectFunction(params) {
  // tout ce qui est d√©fini ici
  // fait partie du scope de la function `sideEffectFunction`

  const imPartOfTheFunctionScope = true

  // si je modifie quelque chose
  // du scope parent, alors je fais un side effect:

  imInTheUpperScope = false // /!\ Side effect!

  // Modifier les param√®tres est √©galement un side effect
  params.hello = 'üëã'
}

// l'ordre des d√©finitions n'a pas d'importance
let imAlsoInTheUpperScope = true
```

`{}`

<small>Le scope de la function est determin√© par ce qui est d√©fini √† l'int√©rieur de ses brackets</small>

</script></section><section  data-markdown><script type="text/template">
<small>Quelques **exemples** de **side effects** :</small>

<small class="fragment">**Modifier des variables** du scope ext√©rieur</small>
<br>
<small class="fragment">Les requ√®tes **HTTP**</small>
<br>
<small class="fragment">L'acc√®s √† une **base de donn√©e**</small>
<br>
<small class="fragment">Cookies, **localStorage**</small>
<br>
<small class="fragment">**Web APIs** (DOM, WebAudio, WebGL...)</small>
<br>
<small class="fragment">**File system**</small>



<aside class="notes"><h2 id="-qu-est-ce-que-les-side-effects-">- Qu&#39;est ce que les side effects ?</h2>
<ul>
<li>Tout ce qui touche au monde ext√©rieur<ul>
<li>HTTP</li>
<li>acc√®s √† une base de donn√©e</li>
<li>Cookies, localStorage</li>
<li>web APIs</li>
<li>File System</li>
</ul>
</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Les side effect en react
</script></section><section  data-markdown><script type="text/template">
```js
// in native: side effect
const view = () => {
  document.body.innerHTML = `
    <div class="container">
      <p>Hello world!</p>
    </div>
  `
}
```

```jsx
// in React: no side effect
const View = () => {
  return (
    <div className="container">
      <p>Hello world!</p>
    </div>
  )
}
```

React rend les int√©ractions avec le DOM **pures** et **d√©claratives**

<aside class="notes"><ul>
<li>Le principe de react est justement de ne pas avoir √† faire de side effects pour modifier le DOM.
  On ne mute plus directement les DOM nodes, mais √† la place on donne une configuration qui
  repr√©sente ce √† quoi le DOM doit resembler en fonction de ses props.</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
<small>Oui mais...</small>

Le web ce n'est pas seulement int√©ragir avec le DOM
</script></section><section  data-markdown><script type="text/template">
quelques side effects, du d√©velopement frontend


<small class="fragment">Les network requests (HTTP ou WebSocket la plupart du temps)</small>

<small class="fragment">L'`url` et l'`History` pour le routing</small>

<small class="fragment">Le `localStorage` ou les `cookies` pour la persistence</small>

<small class="fragment">Les `event listener` globaux (scroll, drag & drop, etc)</small>

<small class="fragment">les autres `threads` (service workers / web workers)</small>

<small class="fragment">la `console` (seulement pour le d√©bugging a priori)</small>

<aside class="notes"><p>Cependant, lorsque l&#39;on fait du web, on g√®re d&#39;autres types de side effects que ceux du DOM.</p>
<pre><code>- Des network requests (HTTP ou WebSocket la pluspart du temps)
- le localStorage ou les cookies pour la persistence
- L&#39;url et l&#39;History pour le routing
- les autres threads (service workers / web workers)
- parfois on a besoin d&#39;ajouter des event listener √† la main sur la window (scroll, drag &amp; drop, etc)
- la console (seulement pour le d√©bugging a priori)
</code></pre></aside></script></section><section  data-markdown><script type="text/template">
pour tout √ßa, on utilise **useEffect**
</script></section><section  data-markdown><script type="text/template">
```jsx
const App = () => {
  useEffect(() => {
    // effects
  })
}
```

<small class="fragment">On place le code relatif aux effects dans un **callback**</small>
<small class="fragment">Ce callback sera runn√© de mani√®re **asynchrone**, une fois que react √† updat√© le DOM.</small>

</script></section><section  data-markdown><script type="text/template">
```js
const App = () => {
  useEffect(() => {
    // i can use 'user' and 'isAdmin'
  }, [user, isAdmin])
}
```

<small class="fragment">Les d√©pendances sont donn√©es en **deuxi√®me param√®tre**</small>
<small class="fragment">√Ä chaque fois que l'une de ses d√©pendances va **changer**, le callback sera **re-ex√©cut√©**</small>
<small class="fragment">Le tableau de d√©pendances est **optionelle**</small>
<small class="fragment">si il n'est pas fourni, le callback sera ex√©cut√© apr√®s chaque render</small>


<aside class="notes"><h3 id="dependances-explicites">dependances explicites</h3>
<ul>
<li>useEffect est une API tr√®s int√©ressante car elle permet de penser ses side effects comme une <strong>cons√©quence</strong> d&#39;un changement de data. Les d√©pendances sont explicite, et le code est runn√© √† chaque
fois qu&#39;une de ses d√©pendance change.</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
```js
const App = () => {
  useEffect(() => {
    window.addEventListener('scroll', handler)
    return () => window.removeEventListener('scroll', handler)
  }, [handler])
}
```

<small class="fragment">√Ä l'int√©rieur du useEffect, je peux retourner une **fonction de cleanup**</small>
<small class="fragment">Elle sera ex√©cut√©e si notre composant est **retir√© du DOM**</small>
<small class="fragment">ou si les d√©pendances ne sont **plus √† jour**</small>

<aside class="notes"><h3 id="cleanup-callback">cleanup callback</h3>
<ul>
<li>Pour certains effets, on a besoin de pouvoir les annuler lors que leur d√©pendances ont chang√©,
comme le event listeners par exemple. Pour √ßa on peut retourner un callback de cleanup dans notre
fonction d&#39;effet.</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
<iframe src="https://codesandbox.io/embed/wonderful-hypatia-f3g60?fontsize=14&view=editor" title="exercice use effect" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
</script></section><section  data-markdown><script type="text/template">
### Cr√©er un custom hook

</script></section><section  data-markdown><script type="text/template">
Il est possible de **composer** plusieurs hooks ensemble<br> 
pour cr√©er un **nouveau** hook.

</script></section><section  data-markdown><script type="text/template">
<iframe src="https://codesandbox.io/embed/exercice-use-effect-wz4pz?fontsize=14&view=editor" title="exercice custom hook" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
</script></section><section  data-markdown><script type="text/template">
Les custom hooks permettent d'**encapsuler** la complexit√© de notre code.
</script></section><section  data-markdown><script type="text/template">
<small class="">En r√©sum√©</small>

<small class="fragment">**useEffect** est mani√®re de rendre **d√©claratif** du code effectful et imp√©ratif.</small>

<small class="fragment">**D√©claratif** car le code est d√©pendant de la data.</small>

<aside class="notes"><p>en r√©sum√©, useEffect est mani√®re d&#39;abstraire du code imp√©ratif pour le rendre <strong>d√©claratif</strong>, c&#39;est √† dire d√©pendant de la data.</p>
</aside></script></section><section  data-markdown><script type="text/template">
### La gestion des erreurs
</script></section><section  data-markdown><script type="text/template">
Les side effects sont par nature **imprevisibles**.

<small class="fragment">une request HTTP **peut √©chouer**</small>
<small class="fragment">un acces au cookie **peut √©chouer** (environement sandbox√©, iframes...)</small>
<small class="fragment">une manipulation de DOM **peut √©chouer** (plusieurs modifications incompatibles)</small>

<aside class="notes"><p>Les side effects sont par nature imprevisibles.</p>
<ul>
<li>une request HTTP peut √©chouer</li>
<li>un acces au cookie peut √©chouer (dans un environnement sandbox√© comme une iframe)</li>
<li>une manipulation de dom peut √©chouer (en cas de modification incompatible par une autre partie de notre codebase ou par l&#39;utilisateur lui m√™me, ses extensions etc)</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
Il **faut** donc consid√©rer les cas d'erreur dans le code.
</script></section><section  data-markdown><script type="text/template">
#### Les promises
</script></section><section  data-markdown><script type="text/template">```js
const p = new Promise((resolve, reject) => {
  // make some effect
  // if it succeed
  resolve(someData)
  // if it fails
  reject(someError)
})
```
<small class="fragment">**2 branches** : une pour le succ√®s et une pour l'erreur</small>

<aside class="notes"><p>Pour √ßa, en javascript, on a quelque chose de pratique: <strong>les promises</strong>.</p>
<ul>
<li>permet de g√©rer le cas d&#39;erreur</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">

```js
fetchUser() // returns a promise
  .then(user => fetchFriends(user)) // chain a second promise
  .then(friends => {}) // when all the side effect are done, run some code
```

<small class="fragment">on peut *s√©quencer* plusieurs effets</small>

<aside class="notes"><ul>
<li>permet de composer et de sequencer plusieurs side effects diff√©rents</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">

<small>
Donc, pourquoi ne pas cr√©er un *hook* pour utiliser des promises dans nos components ?
</small>

</script></section><section  data-markdown><script type="text/template">
<iframe src="https://codesandbox.io/embed/cocky-breeze-0dxfk?fontsize=14&view=editor" title="exercice use promise" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>

<aside class="notes"><p>TUTO construire un promise based useSideEffect hook</p>
<pre><code class="lang-js">const usePromise = (getPromise, deps) =&gt; {
  const [type, setType] = useState(&#39;pending&#39;)
  const [data, setData] = useState(null)
  const [error, setError] = useState(null)
  useEffect(() =&gt; {
    let isCancelled = false
    setType(&#39;pending&#39;)
    setData(null)
    setError(null)

    getPromise()
      .then(data =&gt; {
        if (isCancelled) return
        setData(data)
        setType(&#39;resolved&#39;)
      })
      .catch(err =&gt; {
        if (isCancelled) return
        setError(err)
        setType(&#39;rejected&#39;)
      })

    return () =&gt; {
      isCancelled = true
    }
  }, deps)

  return [type, data, error]
}
</code></pre>
</aside></script></section><section  data-markdown><script type="text/template">
### Side effect et state reducer pattern
</script></section><section  data-markdown><script type="text/template">
On a un probl√®me. 

<small class="fragment">puisque notre reducer est une fonction **pure**, elle ne doit pas avoir de side effect.</small>

<aside class="notes"><p>pottentiel gif: probl√®me</p>
</aside></script></section><section  data-markdown><script type="text/template">
Son type est trop restrictif

`(state, action) => state`
</script></section><section  data-markdown><script type="text/template">
Mais pourquoi pas le changer ?

`(state, action) => [state, callback]`
</script></section><section  data-markdown><script type="text/template">
C'est l'approche de plusieurs langages fonctionelles comme **Elm** ou **Reason**

<aside class="notes"><p>deux approches :</p>
<ol>
<li>Changer la signature de notre r√©ducer:</li>
</ol>
<p>au lieu de <code>(state, action) =&gt; state</code>
on passe √† <code>(state, action) =&gt; [state, effectCallback]</code></p>
<p>^ l&#39;approche de ELM et de Reason. √ßa pose quand m√™me un probl√®me: quand est ce que l&#39;on run les side effects ?
Quand le side effect est synchrone, on peut avoir envie de l&#39;avoir execut√© avant de re-render.</p>
<p>// CODE Sandbox ?</p>
</aside></script></section><section  data-markdown><script type="text/template">
<iframe src="https://codesandbox.io/embed/interesting-yonath-bfou0?fontsize=14&view=editor" title="exercice use effect reducer " allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>

</script></section><section  data-markdown><script type="text/template">
Deuxi√®me solution : 

Utiliser des **middlewares**
</script></section><section  data-markdown><script type="text/template">
C'est l'approche de **Redux**

La plus courante en javascript
</script></section><section  data-markdown><script type="text/template">
<iframe src="https://codesandbox.io/embed/quirky-bird-ux76p?fontsize=14&view=editor" title="exercice : effect middleware" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>

<aside class="notes"><p>Commencer par expliquer ce qu&#39;est un middleware</p>
<ul>
<li>faire un logger middleware</li>
<li>simple thunk middleware</li>
<li>effect middleware avec promises</li>
</ul>
<p>Ou ex√©cuter des side effect dans le contexte d&#39;un state reducer ?</p>
<ol>
<li>utiliser un middleware</li>
</ol>
<p>le middleware prend une fonction qui retourne une promesse et la transform en actions:</p>
<pre><code class="lang-js">
const someEffectAction = {
  type: &#39;SOME_EFFECT_ACTION&#39;,
  async effect() {
    // do stuff
  }
}

dispatch(someEffectAction)
</code></pre>
<p>Le middleware intercepte l&#39;action et va remplacer la function <code>effect</code> par de la data:</p>
<pre><code class="lang-js">{
  type: &#39;SOME_EFFECT_ACTION&#39;,
  effect: {
    type: &#39;pending&#39;,
    error: null,
    data: null
  }
}
</code></pre>
<p>puis</p>
<pre><code class="lang-js">{
  type: &#39;SOME_EFFECT_ACTION&#39;,
  effect: {
    type: &#39;resolved&#39;,
    error: null,
    data: {...} // data returned by the promise
  }
}
</code></pre>
<p>ou</p>
<pre><code class="lang-js">{
  type: &#39;SOME_EFFECT_ACTION&#39;,
  effect: {
    type: &#39;rejected&#39;,
    error: Error{...},  // error thrown by the promise
    data: null
  }
}
</code></pre>
<p>C&#39;est l&#39;approche prise par plusieurs projets open sources, dont Hyper, le terminal de zeit.co</p>
<p>TUTO construire ce middleware</p>
</aside></script></section><section  data-markdown><script type="text/template">
Quel sont les b√©n√©fices de cette approche ? 


<small class="fragment">Nos effets deviennent **inspectables** car ils sont repr√©sent√©s par des actions</small>
<small class="fragment">On peut impl√©menter des **optimistic updates** automatiques</small>

<aside class="notes"><h3 id="quels-sont-les-b-n-fices-">Quels sont les b√©n√©fices ?</h3>
<h4 id="optimistic-updates-for-free">optimistic updates for free</h4>
<p>Puisque l&#39;on peut clairement identifier les actions qui repr√©sentent des effets,
on peut cr√©er une logique d&#39;error handling commune.</p>
<p>L&#39;optimistic update est le fait de faire <em>comme si</em> l&#39;effect avait d√©j√† eu lieu avant que la requete ai fini
pour donner l&#39;impression √† l&#39;utilisateur que notre application est super rapide.</p>
<p>cependant, si l&#39;action fail, il faut <strong>rollback</strong> les changements sur le state pour bien indiquer qu&#39;il y a eu une erreur!</p>
<p>Puisque l&#39;on sait diff√©rentier une action &#39;pending&#39; d&#39;une action &#39;rejected&#39;, on peut automatiser ce processus pour toutes nos actions.
il suffit de :</p>
<ul>
<li>stocker le diff du state au pending</li>
<li>en cas d&#39;erreur, r√©appliquer le state pr√©c√©dent</li>
<li>en cas de succ√®s, on peut enlever le diff que l&#39;on avait stock√©.</li>
</ul>
<h2 id="tester-les-side-effects">Tester les side effects</h2>
<p>Les side effects sont la partie compliqu√© √† tester. Comment simplifier le testing de notre app ?</p>
<p>les mocks &amp; dependency injection</p>
<p>On peut encore am√©liorer notre middleware:</p>
<p>Au lieux d&#39;importer la logique de nos side effect directement dans notre code, on peut se cr√©er
des <strong>services</strong> qui vont se charcher de faire les side effect pour nous, et les injecter via notre middleware.</p>
<p>Comme √ßa, si on est dans un contexte de testes automatis√©, dans lequel on a pas envie de vraiment faire des requests,
on peut injecter un mock de notre service.</p>
<pre><code class="lang-js">// inside our code

const apiService = {
  getUser(id) {
    return fetch(`/users/${id}`).then(res =&gt; res.json())
  }
}

effectMiddleware(apiService)

// Inside an automated test
const apiMock = {
  getUser(id) {
    return new Promise(resolve =&gt; {
      resolve({ name: &#39;Gabriel&#39;, id })
    })
  }
}

effectMiddleware(apiMock)
</code></pre>
</aside></script></section><section  data-markdown><script type="text/template">
### Merci

de votre attention

</script></section><section  data-markdown><script type="text/template">
**Gabriel Vergnaud**

- [Github](https://github.com/gvergnaud)
- [Twitter](https://twitter.com/GabrielVergnaud)
- [LinkedIn](https://www.linkedin.com/in/gabriel-vergnaud-09446199)

<aside class="notes"><!--
good gifs
shipit: https://giphy.com/gifs/fail-code-boat-143vPc6b08locw
keyboard:
 - https://giphy.com/gifs/vodafone-de-done-keyboard-l378gxtNQaXcsqY7K
 - https://giphy.com/gifs/working-typing-cartoon-11BbGyhVmk4iLS
 - https://giphy.com/gifs/tmnt-teenage-mutant-ninja-turtles-cFdHXXm5GhJsc
 - https://media.giphy.com/media/3o7aCTfyhYawdOXcFW/giphy.gif
c pas sorcier
- https://gfycat.com/fr/grandwearyflea
- https://giphy.com/gifs/cannabis-jamy-gourmaud-I9LxqeAcsBRNS
- https://www.google.com/imgres?imgurl=https%3A%2F%2Fresize-europe1.lanmedia.fr%2Fr%2F622%2C311%2Cforcex%2Ccenter-middle%2Fimg%2Fvar%2Feurope1%2Fstorage%2Fimages%2Feurope1%2Fmedias-tele%2Ffred-et-jamy-devoilent-le-nouveau-cest-pas-sorcier-1353712%2F21066760-1-fre-FR%2FFred-et-Jamy-devoilent-le-nouveau-C-est-pas-sorcier.jpg&imgrefurl=https%3A%2F%2Fwww.europe1.fr%2Fmedias-tele%2Ffred-et-jamy-devoilent-le-nouveau-cest-pas-sorcier-1353712&docid=XLVABVUvKIBgHM&tbnid=F-V_Lzs40s6APM%3A&vet=10ahUKEwjD4OWLl8biAhVC8uAKHcBuA0kQMwhRKAEwAQ..i&w=622&h=311&safe=off&bih=766&biw=1440&q=image%20jamie%20fred%20et%20jamy&ved=0ahUKEwjD4OWLl8biAhVC8uAKHcBuA0kQMwhRKAEwAQ&iact=mrc&uact=8 -->
<style>
  .flex {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .flex > *:not(:first-child) {
    margin-left: 10px
  }

  img.simple-image.simple-image {
    border:none;
    box-shadow:none;
    background: none;
  }

  .white.white.white {
    color: white;
    text-shadow: 0 2px 4px rgba(0,0,0, .5);
  }

  .lower.lower.lower {
    text-transform: none;
  }

  .reveal {
    font-size: 35px;
  }

  .reveal small {
    font-size: .7em;
  }

  .reveal pre {
    border-radius: 5px;
    box-shadow: 0px 8px 25px rgba(0,0,0,.25);
  }

  .reveal section img {
    border: none;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15)
  }

  .reveal pre code {
    padding: 30px;
    border-radius: 5px;
    font-weight: normal;
  }

  .reveal code {
    font-weight: bold;
  }
</style></aside></script></section></div>
    </div>

    <script src="./lib/js/head.min.js"></script>
    <script src="./js/reveal.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // Optional libraries used to extend on reveal.js
      var deps = [
        { src: './lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: './plugin/zoom-js/zoom.js', async: true },
        { src: './plugin/notes/notes.js', async: true },
        { src: './plugin/math/math.js', async: true }
      ];

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        dependencies: deps
      };

      // options from URL query string
      var queryOptions = Reveal.getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"slide"}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
